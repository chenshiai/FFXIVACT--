(function(t){function a(a){for(var e,o,r=a[0],l=a[1],u=a[2],h=0,f=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(e in l)Object.prototype.hasOwnProperty.call(l,e)&&(t[e]=l[e]);c&&c(a);while(f.length)f.shift()();return i.push.apply(i,u||[]),s()}function s(){for(var t,a=0;a<i.length;a++){for(var s=i[a],e=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(e=!1)}e&&(i.splice(a--,1),t=o(o.s=s[0]))}return t}var e={},n={app:0},i=[];function o(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=e,o.d=function(t,a,s){o.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,a){if(1&a&&(t=o(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var e in t)o.d(s,e,function(a){return t[a]}.bind(null,e));return s},o.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(a,"a",a),a},o.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=a,r=r.slice();for(var u=0;u<r.length;u++)a(r[u]);var c=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,a,s){t.exports=s("cd49")},"04fd":function(t,a,s){"use strict";var e=s("d552"),n=s.n(e);n.a},2395:function(t,a,s){},"7c55":function(t,a,s){"use strict";var e=s("2395"),n=s.n(e);n.a},"8d91":function(t,a,s){},bda1:function(t,a,s){},be20:function(t,a,s){"use strict";var e=s("eb9d"),n=s.n(e);n.a},cd49:function(t,a,s){"use strict";s.r(a);s("e260"),s("e6cf"),s("cca6"),s("a79d");var e=s("2b0e"),n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"app"}},[s("router-view"),s("div",{staticClass:"buttom-ann"})],1)},i=[],o=(s("7c55"),s("2877")),r={},l=Object(o["a"])(r,n,i,!1,null,null,null),u=l.exports,c=s("8c4f"),h=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"home"},[s("svg",{staticClass:"damage",attrs:{xmlns:"http://www.w3.org/2000/svg"}},[s("defs",[s("g",{attrs:{id:"sex"}},[s("path",{attrs:{d:"m25 7.5l15.155 8.75l0 17.5l-15.155 8.75l-15.155 -8.75l0 -17.5z"}})]),s("linearGradient",{attrs:{id:"Gradient",x1:"1",y1:"1",x2:"0",y2:"0"}},[s("stop",{attrs:{offset:"0.1","stop-color":"white","stop-opacity":"0"}}),s("stop",{attrs:{offset:"0.4","stop-color":"white","stop-opacity":"1"}}),s("stop",{attrs:{offset:"0.9","stop-color":"white","stop-opacity":"0"}})],1),s("mask",{attrs:{id:"Mask"}},[s("rect",{attrs:{x:"0",y:"-3",width:"50",height:"56",fill:"url(#Gradient)"}})])],1)]),t.combtants.length<=0?s("div",{staticClass:"waiting"},[t._v("等待数据输入...")]):[s("BattleDetail",{attrs:{encounter:t.encounter}}),s("transition-group",{attrs:{name:"list-complete"}},t._l(t.combtants,(function(a,e){return s("div",{key:a.name,class:["combtant","YOU"===a.name?"self-combtant":t.getJobColor(a.Job)]},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.joblogo.status,expression:"showConfigs.joblogo.status"}],staticClass:"damage-job"},[s("svg",{staticClass:"job-border",attrs:{xmlns:"http://www.w3.org/2000/svg"}},[s("defs",[s("clipPath",{attrs:{id:"sex-mask"+e}},[s("rect",{attrs:{x:"0",y:"-3",width:"50",height:t.getPercentNumber(a.damageP)}})])]),s("use",{staticClass:"border-sex",attrs:{"xlink:href":"#sex"}}),s("use",{staticClass:"sex-percent",attrs:{"xlink:href":"#sex","clip-path":"url(#sex-mask"+e+")",mask:"url(#Mask)"}})]),s("img",{staticClass:"job",attrs:{src:"../dist/icons/"+a.Job.toLowerCase()+".png"}})]),s("div",{staticClass:"play-detail"},[s("div",{staticClass:"name"},[t._v(t._s(a.name)+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.abbreviation.status,expression:"showConfigs.abbreviation.status"}]},[t._v(" · "+t._s(a.Job))])]),s("div",{staticClass:"encdps"},[s("div",{staticClass:"dc-pct"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.direct.status,expression:"showConfigs.direct.status"}],staticClass:"direct"},[t._v(t._s(a.DirectHitPct))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.crit.status,expression:"showConfigs.crit.status"}],staticClass:"crit"},[t._v(t._s(a.crithitP))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.dirctAcrit.status,expression:"showConfigs.dirctAcrit.status"}],staticClass:"directCrit"},[t._v(t._s(a.CritDirectHitPct))])]),s("Damage",{attrs:{ENCDPS:a.ENCDPS,player:a.name}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.suffix.status,expression:"showConfigs.suffix.status"}],staticClass:"unit"},[t._v("DPS")])],1),s("div",{staticClass:"bottom"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.maxhit.status,expression:"showConfigs.maxhit.status"}],staticStyle:{float:"right"}},[t._v(t._s(a.maxhit))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.showConfigs.deaths.status,expression:"showConfigs.deaths.status"}]},[s("img",{attrs:{src:"../dist/img/kulou.svg",alt:""}}),t._v(" "+t._s(a.deaths)+" ")])])])])})),0)],s("ul",{staticClass:"config"},[s("li",{on:{click:t.lookMyself}},[s("img",{attrs:{src:"../dist/img/self.svg"}}),s("span",{staticClass:"config-detail"},[t._v("个人显示开关")])]),s("li",{on:{click:t.toConfig}},[s("img",{attrs:{src:"../dist/img/setting.svg",alt:""}}),s("span",{staticClass:"config-detail"},[t._v("设置")])])])],2)},f=[],p=(s("45fc"),s("b64b"),s("e25e"),s("9f12")),d=s("53fe"),m=s("8b83"),g=s("c65a"),v=s("c03e"),b=s("9ab4"),w=s("60a3"),C=(s("caad"),s("0d03"),s("4d63"),s("ac1f"),s("25f0"),s("466d"),["acn","arc","blm","brd","drg","lnc","mch","mnk","mnk","min","pgl","pug","rdm","rog","sam","smn","nin","dnc","bum"]),y=["drk","gla","gld","mrd","pld","war","gnb"],V=["ast","cnj","sch","whm"];function x(t){return C.includes(t.toLowerCase())}function O(t){return y.includes(t.toLowerCase())}function j(t){return V.includes(t.toLowerCase())}function _(t,a){var s=30,e=new Date;e.setTime(e.getTime()+24*s*60*60*1e3),document.cookie=t+"="+escape(a)+";expires="+e.toUTCString()}function k(t){var a=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),s=document.cookie.match(a);return s?unescape(s[2]):null}var E=s("4bb5"),S=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("span",{staticClass:"dps-number",attrs:{id:"dps"+t.player}})},D=[],N=(s("a9e3"),s("b680"),s("5319"),s("1276"),function(){return(N=Object.assign||function(t){for(var a,s=1,e=arguments.length;s<e;s++)for(var n in a=arguments[s])Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);return t}).apply(this,arguments)}),P=function(){function t(t,a,s){var e=this;this.target=t,this.endVal=a,this.options=s,this.version="2.0.4",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:""},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.count=function(t){e.startTime||(e.startTime=t);var a=t-e.startTime;e.remaining=e.duration-a,e.useEasing?e.countDown?e.frameVal=e.startVal-e.easingFn(a,0,e.startVal-e.endVal,e.duration):e.frameVal=e.easingFn(a,e.startVal,e.endVal-e.startVal,e.duration):e.countDown?e.frameVal=e.startVal-(e.startVal-e.endVal)*(a/e.duration):e.frameVal=e.startVal+(e.endVal-e.startVal)*(a/e.duration),e.countDown?e.frameVal=e.frameVal<e.endVal?e.endVal:e.frameVal:e.frameVal=e.frameVal>e.endVal?e.endVal:e.frameVal,e.frameVal=Math.round(e.frameVal*e.decimalMult)/e.decimalMult,e.printValue(e.frameVal),a<e.duration?e.rAF=requestAnimationFrame(e.count):null!==e.finalEndVal?e.update(e.finalEndVal):e.callback&&e.callback()},this.formatNumber=function(t){var a,s,n,i,o,r=t<0?"-":"";if(a=Math.abs(t).toFixed(e.options.decimalPlaces),n=(s=(a+="").split("."))[0],i=s.length>1?e.options.decimal+s[1]:"",e.options.useGrouping){o="";for(var l=0,u=n.length;l<u;++l)0!==l&&l%3==0&&(o=e.options.separator+o),o=n[u-l-1]+o;n=o}return e.options.numerals&&e.options.numerals.length&&(n=n.replace(/[0-9]/g,(function(t){return e.options.numerals[+t]})),i=i.replace(/[0-9]/g,(function(t){return e.options.numerals[+t]}))),r+e.options.prefix+n+i+e.options.suffix},this.easeOutExpo=function(t,a,s,e){return s*(1-Math.pow(2,-10*t/e))*1024/1023+a},this.options=N({},this.defaults,s),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(a),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.decimalMult=Math.pow(10,this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof t?document.getElementById(t):t,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined"}return t.prototype.determineDirectionAndSmartEasing=function(){var t=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>t;var a=t-this.startVal;if(Math.abs(a)>this.options.smartEasingThreshold){this.finalEndVal=t;var s=this.countDown?1:-1;this.endVal=t+s*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=t,this.finalEndVal=null;this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},t.prototype.start=function(t){this.error||(this.callback=t,this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},t.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},t.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},t.prototype.update=function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal||this.resetDuration(),this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},t.prototype.printValue=function(t){var a=this.formattingFn(t);"INPUT"===this.el.tagName?this.el.value=a:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=a:this.el.innerHTML=a},t.prototype.ensureNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.prototype.validateValue=function(t){var a=Number(t);return this.ensureNumber(a)?a:(this.error="[CountUp] invalid start or end value: "+t,null)},t.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},t}(),A=function(t){function a(){var t;return Object(p["a"])(this,a),t=Object(m["a"])(this,Object(g["a"])(a).apply(this,arguments)),t.change={},t}return Object(v["a"])(a,t),Object(d["a"])(a,[{key:"w_ENCDPS",value:function(t){this.change.update(parseInt(t,10))}},{key:"mounted",value:function(){var t=this,a={startVal:0,duration:1.5,useGrouping:!1};this.$nextTick((function(){t.change=new P("dps".concat(t.player),parseInt(t.ENCDPS,10),a),t.change.start()}))}}]),a}(w["c"]);b["a"]([Object(w["b"])({default:""})],A.prototype,"ENCDPS",void 0),b["a"]([Object(w["b"])({default:0})],A.prototype,"player",void 0),b["a"]([Object(w["d"])("ENCDPS")],A.prototype,"w_ENCDPS",null),A=b["a"]([w["a"]],A);var F=A,T=F,M=(s("ff3c"),Object(o["a"])(T,S,D,!1,null,null,null)),J=M.exports,$=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"battle-detail"},[s("span",[t._v(t._s(t.encounter.duration))]),s("span",[t._v(t._s(t.encounter.ENCDPS))]),s("p",[s("span",[t._v(t._s(t.encounter.CurrentZoneName))])])])},U=[],G=function(t){function a(){return Object(p["a"])(this,a),Object(m["a"])(this,Object(g["a"])(a).apply(this,arguments))}return Object(v["a"])(a,t),a}(w["c"]);b["a"]([Object(w["b"])()],G.prototype,"encounter",void 0),G=b["a"]([w["a"]],G);var L=G,I=L,q=(s("be20"),Object(o["a"])(I,$,U,!1,null,null,null)),B=q.exports,H=Object(E["a"])("showConfigs"),R=function(t){function a(){var t;return Object(p["a"])(this,a),t=Object(m["a"])(this,Object(g["a"])(a).apply(this,arguments)),t.data={Encounter:{},Combatant:{},isActive:!1},t.Myself=!1,t.TopDamage="",t}return Object(v["a"])(a,t),Object(d["a"])(a,[{key:"updateTemplate",value:function(t){this.data=t.detail}},{key:"lookMyself",value:function(){this.Myself=!this.Myself}},{key:"getJobColor",value:function(t){return x(t)?"dps-color":O(t)?"tank-color":j(t)?"heal-color":"other-color"}},{key:"getPercentNumber",value:function(t){var a=56*parseInt(t,10)/parseInt(this.TopDamage,10);return a}},{key:"toConfig",value:function(){this.$router.push("config")}},{key:"initConfigs",value:function(){var t=k("configs");t?this.setShowConfigs(JSON.parse(t)):_("configs",JSON.stringify(this.showConfigs))}},{key:"mounted",value:function(){var t=this;document.addEventListener("onOverlayDataUpdate",(function(a){t.updateTemplate(a)})),this.initConfigs()}},{key:"destroyed",value:function(){var t=this;document.removeEventListener("onOverlayDataUpdate",(function(a){t.updateTemplate(a)}))}},{key:"encounter",get:function(){return this.data.Encounter}},{key:"combtants",get:function(){var t=this,a=[],s=this.data.Combatant;return Object.keys(s).some((function(e){if(t.Myself){var n="YOU";return a.push(s[n]),!0}s[e].crithitP=s[e]["crithit%"],s[e].damageP=s[e]["damage%"],a.push(s[e])})),a.length>0&&(this.TopDamage=a[0].damageP),a}}]),a}(w["c"]);b["a"]([H.State((function(t){return t.showConfigs}))],R.prototype,"showConfigs",void 0),b["a"]([H.Action("setShowConfigs")],R.prototype,"setShowConfigs",void 0),R=b["a"]([Object(w["a"])({components:{Damage:J,BattleDetail:B}})],R);var Y=R,z=Y,Z=(s("de16"),Object(o["a"])(z,h,f,!1,null,null,null)),K=Z.exports,Q=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"config-page"},[s("div",{staticClass:"waiting"},[s("router-link",{attrs:{to:"/"}},[t._v("返回")])],1),s("div",{staticClass:"config-list"},[s("span",{staticClass:"list-title"},[t._v("显示设定")]),t._l(t.showConfigs,(function(a,e){return s("div",{key:e,staticClass:"item"},[t._v(" "+t._s(a.label)+" "),s("input",{attrs:{name:a.label,type:"checkbox"},domProps:{checked:a.status},on:{change:t.changed}})])}))],2)])},W=[],X=(s("b0c0"),Object(E["a"])("showConfigs")),tt=function(t){function a(){return Object(p["a"])(this,a),Object(m["a"])(this,Object(g["a"])(a).apply(this,arguments))}return Object(v["a"])(a,t),Object(d["a"])(a,[{key:"changed",value:function(t){var a={status:t.target.checked,label:t.target.name};this.changeShowConfigs(a),_("configs",JSON.stringify(this.showConfigs))}}]),a}(w["c"]);b["a"]([X.State((function(t){return t.showConfigs}))],tt.prototype,"showConfigs",void 0),b["a"]([X.Action("changeShowConfigs")],tt.prototype,"changeShowConfigs",void 0),tt=b["a"]([w["a"]],tt);var at=tt,st=at,et=(s("04fd"),Object(o["a"])(st,Q,W,!1,null,null,null)),nt=et.exports;e["a"].use(c["a"]);var it=[{path:"/",name:"home",component:K},{path:"/config",name:"config",component:nt}],ot=new c["a"]({routes:it}),rt=ot,lt=s("2f62"),ut={showConfigs:{joblogo:{status:!0,label:"职业图标"},abbreviation:{status:!0,label:"职业缩写"},suffix:{status:!0,label:"数值后缀"},maxhit:{status:!0,label:"最强伤害"},deaths:{status:!1,label:"死亡次数"},direct:{status:!1,label:"直击概率"},crit:{status:!1,label:"暴击概率"},dirctAcrit:{status:!1,label:"直暴概率"}}},ct={changeShowConfigs:function(t,a){for(var s in t.showConfigs)if(t.showConfigs[s].label===a.label){t.showConfigs[s].status=a.status;break}},setShowConfigs:function(t,a){t.showConfigs=a}},ht={changeShowConfigs:function(t,a){t.commit("changeShowConfigs",a)},setShowConfigs:function(t,a){t.commit("setShowConfigs",a)}},ft={namespaced:!0,state:ut,mutations:ct,actions:ht};e["a"].use(lt["a"]);var pt=new lt["a"].Store({modules:{showConfigs:ft}});e["a"].config.productionTip=!1,new e["a"]({router:rt,store:pt,render:function(t){return t(u)}}).$mount("#app")},d552:function(t,a,s){},de16:function(t,a,s){"use strict";var e=s("8d91"),n=s.n(e);n.a},eb9d:function(t,a,s){},ff3c:function(t,a,s){"use strict";var e=s("bda1"),n=s.n(e);n.a}});
//# sourceMappingURL=app.7b2737ab.js.map